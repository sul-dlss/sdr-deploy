#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH.unshift 'lib'

require 'sdr_deploy'

# CLI for checking cocina version mismatches in the local cache of git repos
class CheckCocina < Thor
  default_task :check_cocina

  desc 'check_cocina', 'check cocina versions'
  def check_cocina
    RepoUpdater.update(repos: Settings.repositories)
    CocinaChecker.check
  end

  def self.exit_on_failure?
    true
  end
end

CheckCocina.start(ARGV)
